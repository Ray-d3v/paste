<Window
    x:Class="PasteWinUI.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="PasteWinUI">
    <Grid
        x:Name="Root"
        Background="Transparent"
        PointerPressed="Root_PointerPressed"
        PointerWheelChanged="Root_PointerWheelChanged"
        KeyDown="Root_KeyDown">
        <Grid
            x:Name="OverlayPanel"
            Margin="0"
            Background="Transparent"
            PointerPressed="OverlayPanel_PointerPressed">
            <Rectangle
                IsHitTestVisible="False"
                RadiusX="22"
                RadiusY="22">
                <Rectangle.Fill>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                        <GradientStop Color="#DD171C22" Offset="0.00" />
                        <GradientStop Color="#D7151A20" Offset="0.55" />
                        <GradientStop Color="#E01A2028" Offset="1.00" />
                    </LinearGradientBrush>
                </Rectangle.Fill>
            </Rectangle>
            <Rectangle
                IsHitTestVisible="False"
                RadiusX="22"
                RadiusY="22"
                Fill="#16FFFFFF" />
            <Rectangle
                IsHitTestVisible="False"
                RadiusX="22"
                RadiusY="22">
                <Rectangle.Fill>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#16000000" Offset="0.00" />
                        <GradientStop Color="#04000000" Offset="0.35" />
                        <GradientStop Color="#20000000" Offset="1.00" />
                    </LinearGradientBrush>
                </Rectangle.Fill>
            </Rectangle>

            <Grid
                HorizontalAlignment="Center"
                VerticalAlignment="Top"
                Margin="20,12,20,0">
                <Button
                    x:Name="SearchToggleButton"
                    Width="28"
                    Height="28"
                    Padding="0"
                    HorizontalAlignment="Center"
                    HorizontalContentAlignment="Center"
                    VerticalContentAlignment="Center"
                    CornerRadius="14"
                    Background="#2012161B"
                    BorderBrush="#5AFFFFFF"
                    BorderThickness="1"
                    Click="SearchToggleButton_Click">
                    <FontIcon
                        Glyph="&#xE721;"
                        FontFamily="Segoe MDL2 Assets"
                        FontSize="11"
                        Margin="-1,0,0,0"
                        Foreground="#F4F7F8FA" />
                </Button>

                <Border
                    x:Name="SearchBarShell"
                    Width="330"
                    Height="38"
                    HorizontalAlignment="Center"
                    Visibility="Collapsed"
                    Opacity="0"
                    CornerRadius="19"
                    Background="#E6181B20"
                    BorderBrush="#66FFFFFF"
                    BorderThickness="1">
                    <Border.RenderTransform>
                        <ScaleTransform
                            x:Name="SearchBarScaleTransform"
                            ScaleX="0.65"
                            ScaleY="0.96"
                            CenterX="165"
                            CenterY="19" />
                    </Border.RenderTransform>
                    <Grid Padding="10,0,8,0" VerticalAlignment="Center">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <FontIcon
                            Grid.Column="0"
                            Glyph="&#xE721;"
                            FontFamily="Segoe MDL2 Assets"
                            FontSize="12"
                            Foreground="#CCDEE2E8"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center" />

                        <TextBox
                            x:Name="SearchTextBox"
                            Grid.Column="1"
                            Margin="8,3,0,3"
                            MinHeight="24"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Center"
                            VerticalContentAlignment="Center"
                            Padding="0"
                            PlaceholderText="Search clipboard history"
                            Background="#2012161B"
                            BorderBrush="#5AFFFFFF"
                            BorderThickness="1"
                            Foreground="#F4F7F8FA"
                            IsEnabled="False"
                            TextChanged="SearchTextBox_TextChanged"
                            KeyDown="SearchTextBox_KeyDown">
                            <TextBox.Resources>
                                <SolidColorBrush x:Key="TextControlBackground" Color="Transparent" />
                                <SolidColorBrush x:Key="TextControlBackgroundFocused" Color="#2E13181E" />
                                <SolidColorBrush x:Key="TextControlBackgroundPointerOver" Color="#1A000000" />
                                <SolidColorBrush x:Key="TextControlBackgroundDisabled" Color="Transparent" />
                                <SolidColorBrush x:Key="TextControlBorderBrush" Color="Transparent" />
                                <SolidColorBrush x:Key="TextControlBorderBrushFocused" Color="#CCFFB469" />
                                <SolidColorBrush x:Key="TextControlBorderBrushPointerOver" Color="#88FFFFFF" />
                            </TextBox.Resources>
                        </TextBox>

                        <Button
                            x:Name="SearchCloseButton"
                            Grid.Column="2"
                            Width="24"
                            Height="24"
                            Padding="0"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            HorizontalContentAlignment="Center"
                            VerticalContentAlignment="Center"
                            Background="#2012161B"
                            BorderBrush="#5AFFFFFF"
                            BorderThickness="1"
                            CornerRadius="12"
                            Click="SearchCloseButton_Click">
                            <FontIcon
                                Glyph="&#xE711;"
                                FontFamily="Segoe MDL2 Assets"
                                FontSize="10"
                                Foreground="#CCDEE2E8" />
                        </Button>
                    </Grid>
                </Border>
            </Grid>

            <ScrollViewer
                x:Name="CardScroller"
                Margin="20,54,20,20"
                Background="Transparent"
                BorderBrush="Transparent"
                BorderThickness="0"
                Padding="0"
                HorizontalScrollMode="Enabled"
                HorizontalScrollBarVisibility="Hidden"
                VerticalScrollMode="Disabled"
                VerticalScrollBarVisibility="Disabled"
                ZoomMode="Disabled"
                VerticalAlignment="Stretch"
                HorizontalAlignment="Stretch"
                IsHorizontalRailEnabled="True"
                IsVerticalRailEnabled="False">
                <ScrollViewer.Resources>
                    <SolidColorBrush x:Key="ScrollViewerBackground" Color="Transparent" />
                    <SolidColorBrush x:Key="ScrollViewerBorderBrush" Color="Transparent" />
                    <SolidColorBrush x:Key="ScrollViewerSeparatorBorderBrush" Color="Transparent" />
                    <Thickness x:Key="ScrollViewerBorderThemeThickness">0</Thickness>
                    <Thickness x:Key="ScrollViewerDefaultBorderThickness">0</Thickness>
                </ScrollViewer.Resources>
                <StackPanel
                    x:Name="CardRow"
                    Orientation="Horizontal"
                    VerticalAlignment="Bottom"
                    Spacing="12" />
            </ScrollViewer>

            <Popup
                x:Name="CardPreviewPopup"
                IsLightDismissEnabled="False">
                <StackPanel
                    x:Name="CardPreviewBubble"
                    Spacing="0"
                    MaxWidth="460">
                    <Border
                        Background="#E6181B20"
                        BorderBrush="#66FFFFFF"
                        BorderThickness="1"
                        CornerRadius="14"
                        Padding="14,12,14,12">
                        <StackPanel Spacing="8">
                            <TextBlock
                                x:Name="CardPreviewTitleText"
                                FontSize="12"
                                FontWeight="SemiBold"
                                Foreground="#F4F7F8FA"
                                TextTrimming="CharacterEllipsis"
                                MaxLines="1" />
                            <Image
                                x:Name="CardPreviewImage"
                                Height="180"
                                Stretch="UniformToFill"
                                Visibility="Collapsed"
                                HorizontalAlignment="Stretch" />
                            <ScrollViewer
                                MaxHeight="220"
                                VerticalScrollBarVisibility="Auto"
                                HorizontalScrollBarVisibility="Disabled">
                                <TextBlock
                                    x:Name="CardPreviewBodyText"
                                    FontSize="13"
                                    Foreground="#CCDEE2E8"
                                    TextWrapping="WrapWholeWords"
                                    LineHeight="20" />
                            </ScrollViewer>
                        </StackPanel>
                    </Border>
                    <Polygon
                        Points="0,0 14,0 7,8"
                        Fill="#E6181B20"
                        Stroke="#66FFFFFF"
                        StrokeThickness="1"
                        HorizontalAlignment="Center"
                        Margin="0,-1,0,0" />
                </StackPanel>
            </Popup>

            <Popup
                x:Name="CardContextPopup"
                IsLightDismissEnabled="False"
                Closed="CardContextPopup_Closed">
                <Border
                    x:Name="CardContextPopupPanel"
                    Background="#E6181B20"
                    BorderBrush="#66FFFFFF"
                    BorderThickness="1"
                    CornerRadius="10"
                    Padding="6">
                    <Button
                        x:Name="CardContextDeleteButton"
                        Content="削除"
                        MinWidth="110"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Left"
                        Padding="10,6"
                        CornerRadius="8"
                        Background="Transparent"
                        BorderThickness="1"
                        BorderBrush="Transparent"
                        Foreground="#F4F7F8FA"
                        Click="CardContextDeleteButton_Click" />
                </Border>
            </Popup>
        </Grid>
    </Grid>
</Window>
